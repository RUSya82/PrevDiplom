(()=>{"use strict";const e=function(e,t){var n,o=performance.now(),r=e.getBoundingClientRect().top,a=document.documentElement.scrollTop,c=0;!function e(){var i=performance.now();(c=(i-o)/t)<=1?(document.documentElement.scrollTop=a+r*c,n=requestAnimationFrame(e)):(document.documentElement.scrollTop=a+r,cancelAnimationFrame(n))}()};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const r=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n(this,e),this.form=document.getElementById(t),this.elements=o,this.errors=new Set}var t,r;return t=e,(r=[{key:"init",value:function(){var e=this;return this.elements.forEach((function(t){e.checkIt(t)})),!!this.getErrorsCount()&&(this.showErrors(),this.getErrors())}},{key:"getErrors",value:function(){return this.errors}},{key:"cleanErrors",value:function(){this.errors.clear()}},{key:"getErrorsCount",value:function(){return this.errors.size}},{key:"showErrors",value:function(){this.errors.forEach((function(e){var t=document.getElementById(e.selector);t.style.border="2px solid red",setTimeout((function(){t.style.border=""}),2e3)}))}},{key:"checkIt",value:function(e){var t=e.selector,n=e.pattern,o=e.method,r=this.form.querySelector("#"+t).value;n?n.test(r)||this.errors.add({selector:t,pattern:n,method:o}):o&&this.getPattern(o)&&!this.getPattern(o).test(r)&&this.errors.add({selector:t,pattern:n,method:o})}},{key:"getPattern",value:function(e){return{email:new RegExp("^[a-z0-9-_.]{2,30}@[a-z]{2,10}.[a-z]{2,5}$","i"),phone:new RegExp("^[+]?[0-9]{7,11}$","i"),name:new RegExp("^[а-яё]{2,20}$","i"),message:new RegExp("[а-яё0-9.,:!?; -]","ig")}[e]}}])&&o(t.prototype,r),e}();var a,c,i,l,s,u,m,d,f,v,h,p,y,g,E,b,L;(function(e){var t=document.getElementById("timer-hours"),n=document.getElementById("timer-minutes"),o=document.getElementById("timer-seconds");function r(e){return+e<10?"0"+e:e}var a=function(){var a,c,i,l,s=(a=0,c=0,i=0,(l=(new Date(e).getTime()-(new Date).getTime())/1e3)>0&&(a=l%60^0,c=l/60%60^0,i=l/60/60^0),{dateDiff:l,hours:i,minutes:c,seconds:a});o.textContent=r(s.seconds),n.textContent=r(s.minutes),t.textContent=r(s.hours)};a(),setInterval(a,1e3)})("30 Mar 2021"),E=document.querySelector("menu"),b=function(e){if(Array.isArray(e))return t(e)}(g=E.querySelectorAll("ul>li"))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(g)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),L=function(){E.classList.toggle("active-menu")},document.body.addEventListener("click",(function(t){var n=t.target;!n.closest("menu")&&E.classList.contains("active-menu")&&L(),n.closest(".menu")&&L(),n.classList.contains("close-btn")&&L();var o=n.closest("li");if(-1!==b.indexOf(o)){t.preventDefault();var r=o.querySelector("a").getAttribute("href").slice(1),a=document.getElementById(r);e(a,200),L()}})),function(){var e=document.querySelectorAll(".popup-btn"),t=document.querySelector(".popup"),n=document.querySelector(".popup-content");e.forEach((function(e){e.addEventListener("click",(function(){o()}))})),t.addEventListener("click",(function(e){var n=e.target;n.classList.contains("popup-close")&&(t.style.display="none"),n.closest(".popup-content")||(t.style.display="none")}));var o=function(){var e;if(document.documentElement.clientWidth>768){t.style.display="block",n.style.transform="scale(0,0) translateX(-50px) rotate(-90deg)";var o=performance.now(),r=0;!function t(){var a=performance.now(),c=90-90*(r=(a-o)/120);r<=1?(r>1&&(r=1),n.style.transform="scale(".concat(r,") translateX(-50px) rotate(-").concat(c,"deg)"),e=requestAnimationFrame(t)):(n.style.transform="scale(1, 1) translateX(-50px) rotate(0deg)",cancelAnimationFrame(e))}()}else t.style.display="block"}}(),y=document.querySelector(".service"),document.querySelector('a[href="#service-block"]').addEventListener("click",(function(t){t.preventDefault(),e(y,200)})),v=document.querySelector(".service-header"),h=document.querySelectorAll(".service-header-tab"),p=document.querySelectorAll(".service-tab"),v.addEventListener("click",(function(e){var t=e.target.closest(".service-header-tab");t&&h.forEach((function(e,n){e===t?(p[n].classList.remove("d-none"),e.classList.add("active")):(p[n].classList.add("d-none"),e.classList.remove("active"))}))})),function(e){var t,n=document.querySelector(".portfolio-content"),o=document.querySelectorAll(".portfolio-item"),r=document.querySelector(".portfolio-dots"),a=[],c=0;!function(){for(var e=0;e<o.length;e++){var t=document.createElement("li");t.classList.add("dot"),0===e&&t.classList.add("dot-active"),a.push(t),r.append(t)}}();var i=function(){c<0?c=o.length-1:c>=o.length&&(c=0)},l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];o[c].classList.remove("portfolio-item-active"),a[c].classList.remove("dot-active"),e?c++:c--,i(),o[c].classList.add("portfolio-item-active"),a[c].classList.add("dot-active")},s=function(){t=setInterval(l,e,!0)};s(),n.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(t.matches("#arrow-right")?l(!0):t.matches("#arrow-left")?l(!1):t.matches(".dot")&&(o[c].classList.remove("portfolio-item-active"),a[c].classList.remove("dot-active"),c=a.indexOf(t),o[c].classList.add("portfolio-item-active"),a[c].classList.add("dot-active")))})),n.addEventListener("mouseover",(function(e){var n=e.target;(n.matches(".portfolio-btn")||n.matches(".dot"))&&clearInterval(t)})),n.addEventListener("mouseout",(function(e){var t=e.target;(t.matches(".portfolio-btn")||t.matches(".dot"))&&s()}))}(3e3),d=document.querySelectorAll(".command__photo"),f=function(e){var t=e.target,n=t.src;t.src=t.dataset.img,t.dataset.img=n},d.forEach((function(e){e.addEventListener("mouseenter",f)})),d.forEach((function(e){e.addEventListener("mouseleave",f)})),document.querySelectorAll(".calc-square, .calc-count, .calc-day").forEach((function(e){e.addEventListener("blur",(function(e){var t=e.target;t.value=t.value.replace(/\D+/g,"")}))})),s=document.querySelectorAll("#form2-name, .form-name"),u=document.getElementById("form2-message"),document.querySelectorAll(".form-email"),m=document.querySelectorAll(".form-phone"),document.getElementById("form2"),s.forEach((function(e){e.addEventListener("input",(function(e){var t=e.target.value;t=t.replace(/[^а-яё^ ]/gi,""),e.target.value=t}))})),u.addEventListener("input",(function(e){var t=e.target,n=t.value;n=n.replace(/[^а-яё0-9.,:!?;^ \-]/gi,""),t.value=n})),m.forEach((function(e){e.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/[^+\d]/gi,"")}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),c=document.getElementById("total"),i=function(){var t=0,i=1,l=1,s=n.options[n.selectedIndex].value,u=+o.value,m=+c.textContent,d=0,f=0,v=m;r.value>1&&(i+=(r.value-1)/10),a.value&&a.value<5?l=2:a.value&&a.value<10&&(l=1.5),s&&u&&(t=e*i*l*s*u,d=Math.abs(t-m)/20,function e(){if(f=requestAnimationFrame(e),m===t)return cancelAnimationFrame(f),void(v=0);if(m<t){if((v+=d)>t)return v=t,cancelAnimationFrame(f),c.textContent=Math.floor(v),void(v=0)}else if(m>t&&(v-=d)<t)return v=t,cancelAnimationFrame(f),c.textContent=Math.floor(v),void(v=0);c.textContent=Math.floor(v)}())};t.addEventListener("change",(function(e){var t=e.target,l=n.options[n.selectedIndex].value;t.matches("select")&&!l&&(a.value="",o.value="",r.value="",c.textContent="0"),t.matches("input, select")&&i()}))}(100),a=new r("form1",[{selector:"form1-name",method:"name"},{selector:"form1-email",method:"email"},{selector:"form1-phone",method:"phone"}]),c=new r("form2",[{selector:"form2-name",method:"name"},{selector:"form2-email",method:"email"},{selector:"form2-phone",method:"phone"},{selector:"form2-message",method:"message"}]),i=new r("form3",[{selector:"form3-name",method:"name"},{selector:"form3-email",method:"email"},{selector:"form3-phone",method:"phone"}]),(l=function(e,t){var n=document.getElementById(e),o=document.createElement("div"),r=document.createElement("img");r.setAttribute("src","../images/preloader.gif"),o.style.cssText="font-size: 2rem; color:#fff;";var a=function(){setTimeout((function(){o.textContent=""}),1e3)};n.addEventListener("submit",(function(e){o.textContent="",e.preventDefault(),n.appendChild(o);var c=new FormData(n),i={};c.forEach((function(e,t){return i[t]=e})),t.init()?(o.textContent="Исправьте данные в полях выделенных красным",t.cleanErrors()):(o.append(r),function(e){return fetch("./server.php",{body:e,method:"POST"})}(JSON.stringify(i)).then((function(e){if(200!==e.status)throw new Error("status not 200");o.textContent="Спасибо! Мы скоро с Вами свяжемся!"})).then((function(){setTimeout((function(){a(),e.target.reset(),document.querySelector(".popup").style.display="none"}),2e3)})).catch((function(e){o.textContent="Что то пошло не так!",a(),console.error(e)})))}))})("form1",a),l("form2",c),l("form3",i)})();
(()=>{"use strict";const e=(e,t)=>{let o,r=performance.now(),n=e.getBoundingClientRect().top,l=document.documentElement.scrollTop,s=0,c=()=>{let e=performance.now();s=(e-r)/t,s<=1?(document.documentElement.scrollTop=l+n*s,o=requestAnimationFrame(c)):(document.documentElement.scrollTop=l+n,cancelAnimationFrame(o))};c()},t=class{constructor(e,t=[]){this.form=document.getElementById(e),this.elements=t,this.errors=new Set}init(){return this.elements.forEach((e=>{this.checkIt(e)})),!!this.getErrorsCount()&&(this.showErrors(),this.getErrors())}getErrors(){return this.errors}cleanErrors(){this.errors.clear()}getErrorsCount(){return this.errors.size}showErrors(){this.errors.forEach((e=>{let t=document.getElementById(e.selector);t.style.border="2px solid red",setTimeout((()=>{t.style.border=""}),2e3)}))}checkIt({selector:e,pattern:t,method:o}){let r=this.form.querySelector("#"+e).value;t?t.test(r)||this.errors.add({selector:e,pattern:t,method:o}):o&&this.getPattern(o)&&!this.getPattern(o).test(r)&&this.errors.add({selector:e,pattern:t,method:o})}getPattern(e){return{email:new RegExp("^[a-z0-9-_.]{2,30}@[a-z]{2,10}.[a-z]{2,5}$","gi"),phone:new RegExp("^[+]?[0-9]{7,11}$","i"),name:new RegExp("^[а-яё]{2,20}$","i"),message:new RegExp("[а-яё0-9.,:!?; -]","ig")}[e]}};(e=>{let t=document.getElementById("timer-hours"),o=document.getElementById("timer-minutes"),r=document.getElementById("timer-seconds");function n(e){return+e<10?"0"+e:e}const l=()=>{let l=(()=>{let t=0,o=0,r=0,n=(new Date(e).getTime()-(new Date).getTime())/1e3;return n>0&&(t=n%60^0,o=n/60%60^0,r=n/60/60^0),{dateDiff:n,hours:r,minutes:o,seconds:t}})();r.textContent=n(l.seconds),o.textContent=n(l.minutes),t.textContent=n(l.hours)};l(),setInterval(l,1e3)})("30 Mar 2021"),(()=>{const t=document.querySelector("menu");let o=[...t.querySelectorAll("ul>li")];const r=()=>{t.classList.toggle("active-menu")};document.body.addEventListener("click",(n=>{let l=n.target;!l.closest("menu")&&t.classList.contains("active-menu")&&r(),l.closest(".menu")&&r(),l.classList.contains("close-btn")&&r();let s=l.closest("li");if(-1!==o.indexOf(s)){n.preventDefault();let t=s.querySelector("a").getAttribute("href").slice(1),o=document.getElementById(t);e(o,200),r()}}))})(),(()=>{let e=document.querySelectorAll(".popup-btn"),t=document.querySelector(".popup"),o=document.querySelector(".popup-content");e.forEach((e=>{e.addEventListener("click",(()=>{r()}))})),t.addEventListener("click",(e=>{let o=e.target;o.classList.contains("popup-close")&&(t.style.display="none"),o.closest(".popup-content")||(t.style.display="none")}));let r=()=>{let e;if(document.documentElement.clientWidth>768){t.style.display="block",o.style.transform="scale(0,0) translateX(-50px) rotate(-90deg)";let r=performance.now(),n=120,l=0,s=()=>{let t=performance.now();l=(t-r)/n;let c=90-90*l;l<=1?(l>1&&(l=1),o.style.transform=`scale(${l}) translateX(-50px) rotate(-${c}deg)`,e=requestAnimationFrame(s)):(o.style.transform="scale(1, 1) translateX(-50px) rotate(0deg)",cancelAnimationFrame(e))};s()}else t.style.display="block"}})(),(()=>{const t=document.querySelector(".service");document.querySelector('a[href="#service-block"]').addEventListener("click",(o=>{o.preventDefault(),e(t,200)}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let r=e.target.closest(".service-header-tab");r&&t.forEach(((e,t)=>{e===r?(console.log(o[t]),o[t].classList.remove("d-none"),e.classList.add("active")):(o[t].classList.add("d-none"),e.classList.remove("active"))}))}))})(),(e=>{const t=document.querySelector(".portfolio-content"),o=document.querySelectorAll(".portfolio-item"),r=document.querySelector(".portfolio-dots");let n,l=[],s=0;(()=>{for(let e=0;e<o.length;e++){let t=document.createElement("li");t.classList.add("dot"),0===e&&t.classList.add("dot-active"),l.push(t),r.append(t)}})();const c=(e=!0)=>{o[s].classList.remove("portfolio-item-active"),l[s].classList.remove("dot-active"),e?s++:s--,s<0?s=o.length-1:s>=o.length&&(s=0),o[s].classList.add("portfolio-item-active"),l[s].classList.add("dot-active")},a=()=>{n=setInterval(c,e,!0)};a(),t.addEventListener("click",(e=>{e.preventDefault();let t=e.target;t.matches(".portfolio-btn, .dot")&&(t.matches("#arrow-right")?c(!0):t.matches("#arrow-left")?c(!1):t.matches(".dot")&&(o[s].classList.remove("portfolio-item-active"),l[s].classList.remove("dot-active"),s=l.indexOf(t),o[s].classList.add("portfolio-item-active"),l[s].classList.add("dot-active")))})),t.addEventListener("mouseover",(e=>{let t=e.target;(t.matches(".portfolio-btn")||t.matches(".dot"))&&clearInterval(n)})),t.addEventListener("mouseout",(e=>{let t=e.target;(t.matches(".portfolio-btn")||t.matches(".dot"))&&a()}))})(3e3),(()=>{let e=document.querySelectorAll(".command__photo");const t=e=>{let t=e.target,o=t.src;t.src=t.dataset.img,t.dataset.img=o};e.forEach((e=>{e.addEventListener("mouseenter",t)})),e.forEach((e=>{e.addEventListener("mouseleave",t)}))})(),document.querySelectorAll(".calc-square, .calc-count, .calc-day").forEach((e=>{e.addEventListener("blur",(e=>{let t=e.target;t.value=t.value.replace(/\D+/g,"")}))})),(()=>{const e=document.querySelectorAll("#form2-name, .form-name"),t=document.getElementById("form2-message"),o=(document.querySelectorAll(".form-email"),document.querySelectorAll(".form-phone"));document.getElementById("form2").addEventListener("blur",(e=>console.log(e.target)),!0),e.forEach((e=>{e.addEventListener("input",(e=>{let t=e.target.value;t=t.replace(/[^а-яё^ ]/gi,""),e.target.value=t}))})),t.addEventListener("input",(e=>{let t=e.target,o=t.value;o=o.replace(/[^а-яё0-9.,:!?;^ \-]/gi,""),t.value=o})),o.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^+\d]/gi,"")}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),n=document.querySelector(".calc-count"),l=document.querySelector(".calc-day"),s=document.getElementById("total");t.addEventListener("change",(t=>{let c=t.target;const a=o.options[o.selectedIndex].value;console.log(),c.matches("select")&&!a&&(l.value="",r.value="",n.value="",s.textContent="0"),c.matches("input, select")&&(()=>{let t=0,c=1,a=1;const m=o.options[o.selectedIndex].value,i=+r.value;let d=+s.textContent,u=0,h=0,p=d;const f=()=>{if(h=requestAnimationFrame(f),d===t)return cancelAnimationFrame(h),void(p=0);if(d<t){if(p+=u,p>t)return p=t,cancelAnimationFrame(h),s.textContent=Math.floor(p),void(p=0)}else if(d>t&&(p-=u,p<t))return p=t,cancelAnimationFrame(h),s.textContent=Math.floor(p),void(p=0);s.textContent=Math.floor(p)};n.value>1&&(c+=(n.value-1)/10),l.value&&l.value<5?a=2:l.value&&l.value<10&&(a=1.5),m&&i&&(t=e*c*a*m*i,u=Math.abs(t-d)/20,f())})()}))})(100),(()=>{let e=new t("form1",[{selector:"form1-name",method:"name"},{selector:"form1-email",method:"email"},{selector:"form1-phone",method:"phone"}]),o=new t("form2",[{selector:"form2-name",method:"name"},{selector:"form2-email",method:"email"},{selector:"form2-phone",method:"phone"},{selector:"form2-message",method:"message"}]),r=new t("form3",[{selector:"form3-name",method:"name"},{selector:"form3-email",method:"email"},{selector:"form3-phone",method:"phone"}]);const n=(e,t)=>{const o=document.getElementById(e),r=document.createElement("div");r.style.cssText="font-size: 2rem; color:#fff;";const n=()=>{setTimeout((()=>{r.textContent=""}),1e3)};o.addEventListener("submit",(e=>{e.preventDefault(),o.appendChild(r);const l=new FormData(o);let s={formData:l};l.forEach(((e,t)=>s[t]=e)),t.init()?(r.textContent="Исправьте данные в полях выделенных красным",t.cleanErrors()):(r.textContent="Загрузка!",(e=>fetch("./server.php",{body:e,method:"POST"}))(JSON.stringify(s)).then((e=>{if(200!==e.status)throw new Error("status not 200");r.textContent="Спасибо! Мы скоро с Вами свяжемся!"})).then((()=>{setTimeout((()=>{n(),e.target.reset(),document.querySelector(".popup").style.display="none"}),2e3)})).catch((e=>{r.textContent="Что то пошло не так!",n(),console.error(e)})))}))};n("form1",e),n("form2",o),n("form3",r)})()})();